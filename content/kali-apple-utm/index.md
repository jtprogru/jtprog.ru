---
title: 'Запуск Kali Linux в UTM на macOS под ARM'
description: "Краткая инструкция по запуску Kali Linux в приложении UTM на macOS с процессорами Apple Silicon. Как развернуть Kali Linux на Mac с Apple Silicon через UTM: подробный гайд для DevOps и SRE"
keywords:
  - apple silicon
  - Kali Linux
  - UTM Virtualize
  - Kali Linux on macOS
date: 2025-12-18T13:20:34+03:00
lastmod: 2025-12-18T13:20:34+03:00
tags:
  - DevOps
  - SRE
  - Kali Linux

categories: ["HowTo"]
cover:
  image: howto.png
  alt: howto
  caption: 'Illustrated by [Igan Pol](https://www.behance.net/iganpol)'
  relative: false
type: post
slug: 'kali-apple-utm'
aliases:
  - '2025/12/18/kali-apple-utm'
---

Привет, `%username%`! Сегодня я расскажу тебе про то, как можно развернуть Kali Linux на маках с процессорами Apple Silicon (M1/M2/M3), используя бесплатную альтернативу Parallels Desktop — виртуализатор [UTM](https://mac.getutm.app/). И да, это не только для пентестеров, но и для всех, кому нужна тестовая среда на базе Linux.

## Зачем это вообще нужно?

Представь, что тебе нужно проверить, как твой сервис ведет себя в определенном окружении. Или протестировать Ansible-плейбуки на свежей системе. Или проверить безопасность своей инфраструктуры с помощью инструментов пентеста. В таких случаях виртуальная машина — это лучший друг.

Kali Linux — это не просто дистрибутив для хакеров из голливудских фильмов. Это полноценная платформа для аудита безопасности, в которой из коробки доступны инструменты вроде Nmap, Metasploit, Burp Suite и Wireshark. Для DevOps и SRE это полезный набор для проверки защищенности инфраструктуры, тестирования сетевой безопасности и поиска уязвимостей еще до того, как их найдут настоящие злоумышленники.

## Почему UTM, а не Parallels?

Давай сразу расставим точки над i. Parallels Desktop — это крутой и удобный инструмент с отличной интеграцией с macOS, поддержкой 3D-ускорения и простым мастером установки. Но есть одна проблема: за него нужно платить около 100 долларов в год.

UTM — это open-source решение на базе QEMU, которое использует фреймворк Apple Hypervisor для виртуализации ARM-систем на скоростях, близких к нативным. Да, UTM требует больше ручных настроек, чем Parallels, и не имеет такой же бесшовной интеграции с macOS. Но зато он бесплатный, активно развивается и отлично справляется с задачами для разработки, тестирования и обучения.

Вот краткое сравнение:

**Parallels Desktop**: автоматическая установка, отличная производительность, профессиональная поддержка, но стоит денег.

**UTM**: бесплатный, открытый исходный код, активное комьюнити, хорошая производительность для ARM-систем, но требует больше ручной настройки.

Для большинства задач DevOps и SRE, особенно если речь идет про эксперименты, тестовые стенды или обучение, UTM — это более чем достаточно.

## Что нам понадобится?

Чтобы все заработало, тебе нужно:

1. Mac с процессором Apple Silicon (M1/M2/M3)
2. Скачанный UTM с официального сайта
3. Installer-образ Kali Linux для ARM64 (именно ARM, не x86!)

Почему именно installer-образ? Потому что он позволит тебе установить систему с нуля на виртуальный диск, настроить все под себя и получить полноценную рабочую среду.

## Шаг 1: Устанавливаем UTM

Заходишь на официальный сайт UTM (mac.getutm.app), скачиваешь .dmg-файл, открываешь его и перетаскиваешь UTM в папку "Приложения". Все как обычно для macOS — никаких подводных камней.

## Шаг 2: Скачиваем образ Kali Linux

Идешь на официальный сайт Kali Linux и качаешь installer-образ для Apple M1/M2 (ARM64). Обрати внимание: нужен именно ISO-файл для установки, а не готовый образ виртуальной машины. Рекомендую качать через торрент — это быстрее и надежнее.

## Шаг 3: Создаем виртуальную машину

Запускаешь UTM и жмешь "Create VM". Дальше важно: выбираешь **"Virtualize"**, а не "Emulate". Виртуализация использует нативные инструкции ARM-процессора через Apple Hypervisor, что дает тебе максимальную производительность. Эмуляция нужна только если ты хочешь запустить x86-систему на ARM, но это будет работать медленно.

На следующем экране выбираешь **"Other"** в качестве типа операционной системы.

Теперь самое важное: на странице настроек нажимаешь "Boot ISO Image" и выбираешь скачанный ранее ISO-файл Kali Linux. Размер диска можешь оставить по умолчанию или увеличить в зависимости от того, сколько места планируешь использовать — для базовой установки с основными инструментами хватит 20-30 ГБ.

## Шаг 4: Важный хак — Serial-режим

Вот тут начинается интересное. Из-за бага в текущих версиях UTM, установку Kali нужно проводить в console-only режиме через Serial-устройство. Звучит страшно, но на деле это просто:

1. После создания VM переходишь в её настройки
2. В разделе "Devices" добавляешь устройство **"Serial"**
3. Сохраняешь и запускаешь VM

Когда VM загрузится, в меню установщика выбираешь **"Install"** (не Graphical Install!). Дальше процесс установки стандартный: выбираешь язык, страну, настраиваешь сеть, создаешь пользователя и пароль.

## Шаг 5: Установка Kali Linux

Процесс установки довольно стандартный для Debian-based систем:

1. Выбираешь язык интерфейса (можешь выбрать русский или оставить английский)
2. Настраиваешь сеть — UTM автоматически создаст NAT-подключение
3. Задаешь hostname для своей виртуалки
4. Создаешь пользователя и пароль
5. На этапе разметки диска выбираешь **"Guided — Use entire disk"** и **"All files in one partition"**
6. Выбираешь инструменты для установки — можешь установить полный набор или только базовую систему

После завершения установки перезагружаешь VM.

## Шаг 6: Финальная настройка

После перезагрузки ты увидишь, что установщик снова предлагает установить Kali. Это нормально — просто нужно удалить ISO-образ из виртуального CD-привода.

Выключаешь VM и делаешь следующее:

1. Переходишь в настройки VM
2. В разделе "Drives" удаляешь ISO-образ установщика
3. В разделе "Devices" удаляешь Serial-устройство (правый клик → Remove)
4. В разделе "Display" меняешь эмуляцию видеокарты на **virtio-gpu-pci**

Эти изменения нужны для того, чтобы переключиться с консольного режима установки на полноценный графический интерфейс.

## Шаг 7: Устанавливаем SPICE Guest Tools

Чтобы все работало максимально комфортно — общий буфер обмена, автоматическое изменение разрешения экрана и лучшая производительность — нужно установить SPICE-инструменты.

Запускаешь VM, логинишься и выполняешь в терминале:

```bash
sudo apt update && sudo apt install spice-vdagent spice-webdavd -y
```

После установки можешь настроить оптимальное разрешение экрана — рекомендуется 1400×900 для большинства макбуков.

## Что дальше?

Теперь у тебя есть полноценная виртуальная машина с Kali Linux, которая работает практически на нативной скорости благодаря ARM-виртуализации. Что с ней делать?

**Для DevOps/SRE:**

- Тестировать Ansible-плейбуки на чистой системе
- Проверять безопасность своей инфраструктуры с помощью Nmap и Metasploit
- Создавать изолированные тестовые среды для экспериментов
- Анализировать сетевой трафик с помощью Wireshark и tcpdump
- Проводить аудит безопасности веб-приложений через Burp Suite

**Для инженеров эксплуатации:**

- Отлаживать проблемы с сетью
- Тестировать конфигурации служб в изолированной среде
- Проводить симуляцию инцидентов безопасности

## Бонус: снапшоты и клонирование

UTM поддерживает создание снапшотов виртуальных машин. Это невероятно удобно: настроил идеальное окружение один раз, сделал снапшот, и можешь откатываться к нему в любой момент. Экспериментируешь с новой конфигурацией? Сделал снапшот. Что-то сломалось? Откатился за пару секунд.

Также можешь клонировать VM для создания нескольких изолированных окружений — например, для тестирования кластерных решений или распределенных систем.

## Альтернативы и сравнение

Конечно, UTM — не единственный вариант для виртуализации на Mac. Вот краткое сравнение популярных решений:

**Parallels Desktop**: лучшая интеграция с macOS, автоматическая установка, отличная производительность, но платный.

**VMware Fusion**: есть бесплатная версия Player, хорошая производительность, но интерфейс не такой удобный как у Parallels.

**UTM**: бесплатный, open-source, отличная производительность для ARM, активное комьюнити, но требует больше ручной настройки.

**VirtualBox**: классика виртуализации, но плохо работает на Apple Silicon и требует эмуляции.

Для большинства задач DevOps и SRE, особенно если речь про обучение, эксперименты и разработку, UTM — это оптимальный выбор по соотношению цена/качество.

## Возможные проблемы и их решения

**Черный экран после выбора режима установки**: это известная проблема, решается использованием Serial-режима, как описано выше.

**Не работает общий буфер обмена**: убедись, что установил spice-vdagent и spice-webdavd, и включил Clipboard Sharing в настройках VM.

**Низкая производительность**: проверь, что выбрал "Virtualize", а не "Emulate" при создании VM, и выделил достаточно RAM (минимум 3-4 ГБ).

**Проблемы с сетью**: UTM автоматически создает NAT-подключение, но если что-то не работает, можешь попробовать режим Bridge в настройках сети.

## Итоги

Развернуть Kali Linux на Mac с Apple Silicon через UTM — это вполне реальная задача, которая не требует покупки дорогих коммерческих решений. Да, придется немного повозиться с настройками, но результат того стоит: ты получаешь полноценную виртуальную машину с отличной производительностью и всеми необходимыми инструментами для тестирования, разработки и аудита безопасности.

UTM — это отличная демонстрация того, как open-source решения могут конкурировать с коммерческими продуктами, особенно в руках тех, кто не боится немного покопаться в настройках. Для DevOps и SRE это особенно актуально: мы привыкли читать YAML и bash-скрипты, разбираться в документации и решать проблемы нестандартными способами.

Так что если у тебя есть Mac на Apple Silicon и нужна виртуалка с Linux — смело пробуй UTM. Это бесплатно, это работает, и это open-source.

---

Если у тебя есть вопросы, комментарии и/или замечания — заходи в [чат](https://ttttt.me/jtprogru_chat), а так же подписывайся на [канал](https://ttttt.me/jtprogru_channel).

О способах отблагодарить автора можно почитать на странице "[Донаты](https://jtprog.ru/donations/)". 
