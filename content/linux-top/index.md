---
title: "[Linux] Что показывает top?"
date: 2020-11-04T16:14:13+03:00
type: 'post'
# aliases: ["/first"]
tags: ["first"]
author: "JTProg"
# author: ["Me", "You"] # multiple authors
showToc: false
TocOpen: false
draft: false
hidemeta: false
disableShare: false
# cover:
#     image: "<image path/url>"
#     alt: "<alt text>"
#     caption: "<text>"
#     relative: false
comments: false
---

Привет, `%username%`! Для того, чтобы посмотреть чем именно занят ваш Linux-сервер, надо посмотреть, что же запущено в нем – какие процессы, сколько ресурсов они используют. Для этого есть замечательная утилита `top`, которая присутствует "из коробки".

Запустить утилиту:
```bash
# от имени root'а
sudo top
# или просто
top
```
Далее по порядку – что показывает данная утилита:
1. 1-я строка — `top`:
	- Текущее время (`22:43:39`);
	- Аптайм, то есть время работы без перезагрузки (`up 39 days, 7:32`);
	- Количество подключенных пользователей (3 users);
	- Средняя загруженность системы (load average: 1.15, 1.11, 1.06) за 1 минуту, 5 минут и 15 минут;

2. 2-я строка — `Tasks`:
	- Всего запущено процессов (`628 total`);
	- Исполняющихся сейчас процессов (`2 running`);
	- Спящих процессов (`626 sleeping`);
	- Остановленных процессов (`0 stopped`);
	- Процессов, ожидающих сигнала завершения от родителя, то есть зомби (`0 zombie`);

3. 3-я строка — `%Cpu(s)`:
	- Процент иcпользования процессора пользователями (`1.1 us`);
	- Процент иcпользования процессора системой (`0.4 sy`);
	- Процент использования процессора приоритеными процессами "команда nice" (`0.0 ni`);
	- Процент простаивающих мощностей (`98,5 id`);
	- Процент ожидающих I/O операций. (`0.0 wa`);
	- Процент использования процессора на обслуживание аппаратных прерываний Hardware IRQ (`0.0 hi`);
	- Процент использования процессора на обслуживание программных прерываний Software Interrupts (`0.0 si`);
	- Процент использования процессора для других задач, например, обслуживания гипервизора. Равен 0 на физической машине (`0.0 st`);

4. 4-я и 5-я строка — `memory usage`
	- Общий объем памяти;
	- Использованный объем памяти;
	- Объём свободной памяти;
	- Объем буферов в кэше;
	- Далее тоже самое, но касательно swap;

Оставшиеся строки – `processes list`, по которым показывается следующая информация:
- `PID` – Proccess ID процесса;
- `USER` – С правами какого пользователя выполняется;
- `PR` – Приоритет процесса;
- `NI` – Значение "nice" процесса;
- `VIRT` – Виртуальная память, используемая процессом;
- `RES` – Физическая память, используемая процессом;
- `SHR` – Разделяемая память процесса;
- `S` – Состояние процесса:
	- `S` - спящий;
	- `R` - запущенный;
	- `Z` - зомби;
- `%CPU` – Процент использования процессора процессом;
- `%MEM` – Процент использования памяти;
- `TIME+` - Общее время активности процесса;
- `COMMAND` – Команда, которой был вызван процесс;

Данная утилита, как видно из описания предоставляет довольно подробную информацию, которой будет достаточно для диагностики. Так же эта утилита сразу есть в дистрибутиве, в отличии от "красивого" `htop`.

Управлять top'ом можно с помощью следующих "кнопочек":
- `t` - Включение и выключение вывода на экран суммарных данных;
- `m` - Включение и выключение вывода на экран информации о памяти;
- `A` - Сортировка строк по максимальному потреблению различных системных ресурсов;
- `f` - Вход в меню конфигурирования данных, выводимыхмых на экран;
- `o` - Позволяет интерактивно задавать порядок строк;
- `r` - Изменение приоритета процесса с помощью команды `renice`;
- `k` - Уничтожение процесса с помощью команды `kill`;
- `Y` - Вывод количества используемой памяти в б, Кб, Мб, Гб и т.д. в зависимости от количества нажатий;
- `с` - подробный вывод команды запуска процесса;

В качестве бонуса – выглядит утилита в работе примерно так:
![](https://i.ibb.co/Lt9XPb0/2020-10-20-23-00-59.png)

Собственно, на этом всё.
